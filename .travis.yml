language: php
php:
    - 7.4

install:
    - nvm install 10
    - npm install
    - composer install

script:
- ".travis-build/phplint ."
- vendor/bin/phpunit -v

after_script:
- vendor/bin/test-reporter

after_success:
    - npm run build
    - rm -rf node_modules
    - tar -czf Internshipinventory.tar.gz *

addons:
  code_climate:
    repo_token: 3060bdda5db8f779d82ab527acadec5cd581bde782093136322604a4280162e7

notifications:
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: d1dDZ6gam6rV7aR9wVzruzZJlwYMyAmeyF47vwLyAupyHbaiWqeqtwAxliYZpVUT1eNrcIXQg8oIpxTItsypG9T4qAcGPtXFMqDUffqdgnlh5Tv37vcr+wM+/usHrYOfSiGPTRaV02aPgE0+RICbObv5ZBNUSTGZi4sFMcZ8Svs=
  file: Internshipinventory.tar.gz
  overwrite: true
  on:
    repo: AppStateESS/InternshipInventory
    branch: master
    tags: true
